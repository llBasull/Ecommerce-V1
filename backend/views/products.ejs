<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Products</title>
    <link rel="stylesheet" href="/products-styles.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
  </head>
      <script>
        document.addEventListener("visibilitychange", () => {
            return document.hidden ? document.title = "Come back :("
                : document.title = "Ecommerce"
        })
    </script>
  <body>
    <div class="overlay"></div>
    <nav id="navbar">
      <button class="filters">
        <span class="material-symbols-outlined"> tune </span>
      </button>
      <form class="search-div" action="/product-search" method="post">
        <input type="text" name="query">
        <button type="submit">Search</button>
      </form>
    </nav>
    <section id="filters">
      <h3 style="display: inline-flex; align-items: center; gap: 12px">
        Filters <span class="material-symbols-outlined"> tune </span>
      </h3>
      <div class="colorFilter">
        <div id="available-colors">
          <p>Color</p>
          <div id="color-list"></div>
        </div>
      </div>
      <div class="range">
        <p>Price</p>
        <div class="range-slider">
          <span class="range-selected"></span>
        </div>
        <div class="range-input">
          <input
            type="range"
            class="min"
            min="0"
            max="4000"
            value="1200"
            step="10"
          />
          <input
            type="range"
            class="max"
            min="0"
            max="4000"
            value="2800"
            step="10"
          />
        </div>
        <div class="range-price">
          <label for="min">Min</label>
          <input type="number" name="min" value="1200" />
          <label for="max">Max</label>
          <input type="number" name="max" value="2800" />
        </div>
      </div>
    </section>

    <section id="products">
      <% for (let index=0; index < products.length; index++) { %>
        <div class="product" >
                  <a href="/product?id=<%= products[index].productName %>">
                    <img 
        src="<%= products[index].imageUrl %>"
        alt=""
        />
                  </a>
        <p class="product-name"><%= products[index].productName %></p>
        <p class="product-price">â‚¹ &nbsp;<%= products[index].price %>&nbsp;</p>
        </div>
      <% } %>

    </section>
    <script>
      console.log("Hi")
      var products = JSON.parse(`<%- JSON.stringify(products) -%>`);  
      products.forEach(item => {
        console.log(item)
      }) 
    </script> 
    <script src="/products.js"></script>
  </body>
</html>
